<ion-header>
    <ion-toolbar>
        <ion-title>
            Filter
        </ion-title>
        <ion-buttons start>
            <button ion-button (click)="closeModal()">
                <span ion-text color="primary" showWhen="ios">Cancel</span>
                <ion-icon name="md-close" showWhen="android, windows"></ion-icon>
            </button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content>
    <ion-list>
        <ion-list-header style="margin: 0px;color:#ef548a;">
            STANDARD CRITERIAS
        </ion-list-header>
        <!-- Gender -->
        <ion-row>
            <ion-col col-12>
                <ion-item class="ion-item-noborder">
                    <ion-label>Gender</ion-label>
                    <ion-toggle [(ngModel)]="specificCrieteria.IsGenderActive" [checked]="specificCrieteria.IsGenderActive" (ionChange)="onToggleChange('Gender')"></ion-toggle>
                </ion-item>
                <div class="ion-item-border" *ngIf="specificCrieteria.IsGenderActive">
                    <ion-list radio-group style="margin:0px;" [(ngModel)]="specificCrieteria.Gender">
                        <ion-row>
                            <ion-col col-6 style="padding:0px;">
                                <ion-item class="ion-item-noborder">
                                    <ion-radio item-left value="2"></ion-radio>
                                    <ion-label class="font-size-14">Male</ion-label>
                                </ion-item>
                            </ion-col>
                            <ion-col col-6 style="padding:0px;">
                                <ion-item class="ion-item-noborder">
                                    <ion-radio item-left value="1"></ion-radio>
                                    <ion-label class="font-size-14">Female</ion-label>
                                </ion-item>
                            </ion-col>
                        </ion-row>
                    </ion-list>
                </div>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col col-12>
                <ion-item class="ion-item-noborder">
                    <ion-label>ID Card Checked</ion-label>
                    <ion-toggle [(ngModel)]="specificCrieteria.IsProfileVerifiedActive" [checked]="specificCrieteria.IsProfileVerifiedActive"
                        (ionChange)="onToggleChange('ProfileVerified')"></ion-toggle>
                </ion-item>
                <div class="ion-item-border" *ngIf="specificCrieteria.IsProfileVerifiedActive">
                    <ion-list radio-group style="margin:0px;" [(ngModel)]="specificCrieteria.ProfileVerified">
                        <ion-row>
                            <ion-col col-6 style="padding:0px;">
                                <ion-item class="ion-item-noborder">
                                    <ion-radio item-left value="true"></ion-radio>
                                    <ion-label class="font-size-14">Yes</ion-label>
                                </ion-item>
                            </ion-col>
                            <ion-col col-6 style="padding:0px;">
                                <ion-item class="ion-item-noborder">
                                    <ion-radio item-left value="false"></ion-radio>
                                    <ion-label class="font-size-14">No</ion-label>
                                </ion-item>
                            </ion-col>
                        </ion-row>
                    </ion-list>
                </div>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col col-12>
                <ion-item class="ion-item-noborder">
                    <ion-label>Age</ion-label>
                    <ion-toggle [(ngModel)]="specificCrieteria.IsAgeFilterActive" (ionChange)="onToggleChange('Age')" [checked]="specificCrieteria.IsAgeFilterActive"></ion-toggle>
                </ion-item>
                <div class="ion-item-border" *ngIf="specificCrieteria.IsAgeFilterActive">
                    <ion-row>
                        <ion-col col-6 style="padding:0px;">
                            <ion-list style="margin:0px;">
                                <ion-item class="ion-item-noborder">
                                    <ion-select [(ngModel)]="specificCrieteria.MinAge">
                                        <ion-option value="">--Select--</ion-option>
                                        <ion-option *ngFor="let item of minAge" [value]="item.value">{{item.label}}</ion-option>
                                    </ion-select>
                                </ion-item>
                            </ion-list>
                        </ion-col>
                        <ion-col col-6 style="padding:0px;">
                            <ion-list style="margin:0px;">
                                <ion-item class="ion-item-noborder">
                                    <ion-select [(ngModel)]="specificCrieteria.MaxAge">
                                        <ion-option value="">--Select--</ion-option>
                                        <ion-option *ngFor="let item of age" [value]="item.value">{{item.label}}</ion-option>
                                    </ion-select>
                                </ion-item>
                            </ion-list>
                        </ion-col>
                    </ion-row>
                </div>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col col-12>
                <ion-item class="ion-item-noborder">
                    <ion-label>Years of Experiences</ion-label>
                    <ion-toggle [(ngModel)]="specificCrieteria.IsExperienceFilterActive" (ionChange)="onToggleChange('Experience')" [checked]="specificCrieteria.IsExperienceFilterActive"></ion-toggle>
                </ion-item>
                <div class="ion-item-border" *ngIf="specificCrieteria.IsExperienceFilterActive">
                    <ion-row>
                        <ion-col col-6 style="padding:0px;">
                            <ion-list style="margin:0px;">
                                <ion-item>
                                    <ion-select [(ngModel)]="specificCrieteria.MinYearsOfExperience">
                                        <ion-option value="">--Select--</ion-option>
                                        <ion-option *ngFor="let exp of experiences" [value]="exp.value">{{exp.label}}</ion-option>
                                    </ion-select>
                                </ion-item>
                            </ion-list>
                        </ion-col>
                        <ion-col col-6 style="padding:0px;">
                            <ion-list style="margin:0px;">
                                <ion-item>
                                    <ion-select [(ngModel)]="specificCrieteria.MaxYearsOfExperience">
                                        <ion-option value="">--Select--</ion-option>
                                        <ion-option *ngFor="let exp of experiences" [value]="exp.value">{{exp.label}}</ion-option>
                                    </ion-select>
                                </ion-item>
                            </ion-list>
                        </ion-col>
                    </ion-row>
                </div>

            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col col-12>
                <ion-item class="ion-item-noborder">
                    <ion-label>Type of Staff</ion-label>
                    <ion-toggle [(ngModel)]="specificCrieteria.IsStaffTypeFilterActive" [checked]="specificCrieteria.IsStaffTypeFilterActive"
                        (ionChange)="onToggleChange('StaffType')"></ion-toggle>
                </ion-item>
                <div class="ion-item-border" *ngIf="specificCrieteria.IsStaffTypeFilterActive">
                    <ion-list radio-group style="margin:0px;" [(ngModel)]="specificCrieteria.StaffType">
                        <ion-row>
                            <ion-col col-6 style="padding:0px;">
                                <ion-item class="ion-item-noborder">
                                    <ion-radio item-left checked="true" value="1"></ion-radio>
                                    <ion-label>Independant</ion-label>
                                </ion-item>
                            </ion-col>
                            <ion-col col-6 style="padding:0px;">
                                <ion-item class="ion-item-noborder">
                                    <ion-radio item-left value="2"></ion-radio>
                                    <ion-label>Agency</ion-label>
                                </ion-item>
                            </ion-col>
                        </ion-row>
                    </ion-list>
                </div>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col col-12>
                <ion-item class="ion-item-noborder">
                    <ion-label>Disponibility</ion-label>
                    <ion-toggle [(ngModel)]="specificCrieteria.IsDisponibilityFilterActive" [checked]="specificCrieteria.IsDisponibilityFilterActive"
                        (ionChange)="onToggleChange('Date')"></ion-toggle>
                </ion-item>
                <div class="ion-item-border" *ngIf="specificCrieteria.IsDisponibilityFilterActive">
                    <ion-item>
                        <ion-label>Select Date</ion-label>
                        <ion-datetime displayFormat="DD-MMM-YYYY" pickerFormat="DD-MMM-YYYY" placeholder="" [(ngModel)]="specificCrieteria.Disponibility"></ion-datetime>
                    </ion-item>
                </div>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col col-12>
                <ion-item class="ion-item-noborder">
                    <ion-label>Localizations</ion-label>
                    <ion-toggle [(ngModel)]="specificCrieteria.IsLocalizationFilterActive" (ionChange)="onToggleChange('Localization')" [checked]="specificCrieteria.IsLocalizationFilterActive"></ion-toggle>
                </ion-item>
                <div class="ion-item-border" *ngIf="specificCrieteria.IsLocalizationFilterActive">
                    <ion-row>
                        <ion-col col-6 style="padding:0px;">
                            <ion-list style="margin:0px;">
                                <ion-item>
                                    <ion-select [(ngModel)]="specificCrieteria.City" (ionChange)="onSelectedCity()">
                                        <ion-option value="">--Select City--</ion-option>
                                        <ion-option *ngFor="let item of cities" [value]="item.CityId">{{item.CityName}}</ion-option>
                                    </ion-select>
                                </ion-item>
                            </ion-list>
                        </ion-col>
                        <ion-col col-6 style="padding:0px;">
                            <ion-list style="margin:0px;">
                                <ion-item>
                                    <ion-select [(ngModel)]="specificCrieteria.District" [disabled]="specificCrieteria.CityId == 0">
                                        <ion-option value="">--Select District--</ion-option>
                                        <ion-option *ngFor="let item of districts" [value]="item.DistrictId">{{item.DistrictName}}</ion-option>
                                    </ion-select>
                                </ion-item>
                            </ion-list>
                        </ion-col>
                    </ion-row>
                </div>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col col-12>
                <ion-item class="ion-item-noborder">
                    <ion-label>Salary Between</ion-label>
                    <ion-toggle [(ngModel)]="specificCrieteria.IsSalaryFilterActive" [checked]="specificCrieteria.IsSalaryFilterActive" (ionChange)="onToggleChange('Salary')"></ion-toggle>
                </ion-item>
                <ion-list *ngIf="specificCrieteria.IsSalaryFilterActive">
                    <div class="ion-item-border">
                        <ion-row>
                            <ion-col col-6 style="padding:0px;">
                                <ion-item class="no-border">
                                    <ion-input [(ngModel)]="specificCrieteria.MinSalary" type="tel" placeholder="Min" spellcheck="false" autocapitalize="off"
                                        maxlength="7" (keypress)="onlyNumber($event)">
                                    </ion-input>

                                </ion-item>
                            </ion-col>
                            <ion-col col-6 style="padding:0px;">
                                <ion-item class="no-border">
                                    <ion-input [(ngModel)]="specificCrieteria.MaxSalary" type="tel" placeholder="Min" spellcheck="false" autocapitalize="off"
                                        maxlength="7" (keypress)="onlyNumber($event)">
                                    </ion-input>
                                </ion-item>
                            </ion-col>
                        </ion-row>
                    </div>
                </ion-list>
            </ion-col>
        </ion-row>
    </ion-list>
    <ion-list>
        <ion-list-header style="margin: 0px;color:#ef548a;">
            SPECIFIC CRITERIAS
        </ion-list-header>
    </ion-list>
    <ion-row class="padding-left-15" *ngIf="jobTasks.length > 0">
        <ion-col col-12>
          <div class="categories">
            <div *ngFor="let job of (jobTasks | jobTaskPipe)">
              <ion-checkbox item-left class="margin-right-15" name="job_task_{{job.JobTaskId}}" [(ngModel)]="job.Selected">
              </ion-checkbox>
              <span>{{job.JobTaskName}}</span>
              <ul>
                <ng-template #recursiveList let-list>
                  <li *ngFor="let subTask of list">
                    <div>
                      <ion-checkbox item-left class="margin-right-15" name="job_task_{{subTask.JobTaskId}}" [(ngModel)]="subTask.Selected">
                      </ion-checkbox>
                      <span>{{subTask.JobTaskName}}</span>
                    </div>
                    <ul *ngIf="subTask.SubTasks?.length > 0">
                      <ng-container *ngTemplateOutlet="recursiveList; context:{ $implicit: subTask.SubTasks }"></ng-container>
                    </ul>
                  </li>
                </ng-template>
                <ng-container *ngTemplateOutlet="recursiveList; context:{ $implicit: job.SubTasks }"></ng-container>
              </ul>
            </div>
          </div>
        </ion-col>
      </ion-row>

    <ion-fab right bottom class="jobtek-fab-btn">
        <button ion-fab mini color="danger" (click)="onFilterSearch()">
            <ion-icon name="search"></ion-icon>
        </button>
    </ion-fab>
</ion-content>